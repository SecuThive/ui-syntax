{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/PC/photopolio/ui-syntax/src/app/api/render/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\r\n\r\nexport async function POST(req: NextRequest) {\r\n  try {\r\n    const { code } = await req.json();\r\n\r\n    // 코드 정리\r\n    let cleaned = code\r\n      .replace(/```tsx[\\s\\S]*?```/g, '')\r\n      .replace(/```jsx[\\s\\S]*?```/g, '')\r\n      .replace(/import\\s+.*?from\\s+['\"].*?['\"]/g, '')\r\n      .replace(/export\\s+default\\s+/g, '')\r\n      .trim();\r\n\r\n    // 컴포넌트 이름 정규화\r\n    let normalized = cleaned;\r\n    \r\n    // const MyComponent = ... 패턴\r\n    const constMatch = cleaned.match(/const\\s+(\\w+)\\s*=/);\r\n    if (constMatch) {\r\n      normalized = cleaned.replace(new RegExp(`const\\\\s+${constMatch[1]}\\\\s*=`), 'const App =');\r\n    }\r\n    \r\n    // function MyComponent() 패턴\r\n    const funcMatch = cleaned.match(/function\\s+(\\w+)\\s*\\(/);\r\n    if (funcMatch) {\r\n      normalized = cleaned.replace(new RegExp(`function\\\\s+${funcMatch[1]}\\\\s*\\\\(`), 'function App(');\r\n    }\r\n    \r\n    // 순수 JSX (< 로 시작)\r\n    if (!constMatch && !funcMatch && cleaned.startsWith('<')) {\r\n      normalized = `const App = () => (${cleaned})`;\r\n    }\r\n    \r\n    // 그 외의 경우\r\n    if (!constMatch && !funcMatch && !cleaned.startsWith('<')) {\r\n      normalized = `const App = ${cleaned}`;\r\n    }\r\n\r\n    // 특수 문자 이스케이프\r\n    const escaped = normalized\r\n      .replace(/\\\\/g, '\\\\\\\\')\r\n      .replace(/`/g, '\\\\`')\r\n      .replace(/\\$/g, '\\\\$');\r\n\r\n    // HTML 생성\r\n    const html = `<!DOCTYPE html>\r\n<html>\r\n<head>\r\n  <meta charset=\"UTF-8\">\r\n  <script crossorigin src=\"https://unpkg.com/react@18/umd/react.development.js\"></script>\r\n  <script crossorigin src=\"https://unpkg.com/react-dom@18/umd/react-dom.development.js\"></script>\r\n  <script src=\"https://unpkg.com/@babel/standalone/babel.min.js\"></script>\r\n  <script src=\"https://cdn.tailwindcss.com\"></script>\r\n  <style>\r\n    body { margin: 0; padding: 20px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto'; }\r\n    .error { background: #7f1d1d; color: #fca5a5; padding: 16px; border-radius: 6px; font-family: monospace; font-size: 13px; white-space: pre-wrap; word-break: break-all; }\r\n  </style>\r\n</head>\r\n<body>\r\n  <div id=\"root\"></div>\r\n  <script type=\"text/babel\">\r\n    try {\r\n      ${escaped}\r\n      const root = ReactDOM.createRoot(document.getElementById('root'));\r\n      root.render(<App />);\r\n      \r\n      // 높이 감지\r\n      new ResizeObserver(() => {\r\n        const height = document.body.scrollHeight;\r\n        window.parent.postMessage({ type: 'resize', height }, '*');\r\n      }).observe(document.body);\r\n    } catch (err) {\r\n      document.getElementById('root').innerHTML = '<div class=\"error\">Error: ' + (err.message || String(err)) + '</div>';\r\n    }\r\n  </script>\r\n</body>\r\n</html>`;\r\n\r\n    return NextResponse.json({ html });\r\n  } catch (err) {\r\n    return NextResponse.json(\r\n      { error: String(err) },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAEO,eAAe,KAAK,GAAgB;IACzC,IAAI;QACF,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,IAAI;QAE/B,QAAQ;QACR,IAAI,UAAU,KACX,OAAO,CAAC,sBAAsB,IAC9B,OAAO,CAAC,sBAAsB,IAC9B,OAAO,CAAC,mCAAmC,IAC3C,OAAO,CAAC,wBAAwB,IAChC,IAAI;QAEP,cAAc;QACd,IAAI,aAAa;QAEjB,6BAA6B;QAC7B,MAAM,aAAa,QAAQ,KAAK,CAAC;QACjC,IAAI,YAAY;YACd,aAAa,QAAQ,OAAO,CAAC,IAAI,OAAO,CAAC,SAAS,EAAE,UAAU,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG;QAC7E;QAEA,4BAA4B;QAC5B,MAAM,YAAY,QAAQ,KAAK,CAAC;QAChC,IAAI,WAAW;YACb,aAAa,QAAQ,OAAO,CAAC,IAAI,OAAO,CAAC,YAAY,EAAE,SAAS,CAAC,EAAE,CAAC,OAAO,CAAC,GAAG;QACjF;QAEA,kBAAkB;QAClB,IAAI,CAAC,cAAc,CAAC,aAAa,QAAQ,UAAU,CAAC,MAAM;YACxD,aAAa,CAAC,mBAAmB,EAAE,QAAQ,CAAC,CAAC;QAC/C;QAEA,UAAU;QACV,IAAI,CAAC,cAAc,CAAC,aAAa,CAAC,QAAQ,UAAU,CAAC,MAAM;YACzD,aAAa,CAAC,YAAY,EAAE,SAAS;QACvC;QAEA,cAAc;QACd,MAAM,UAAU,WACb,OAAO,CAAC,OAAO,QACf,OAAO,CAAC,MAAM,OACd,OAAO,CAAC,OAAO;QAElB,UAAU;QACV,MAAM,OAAO,CAAC;;;;;;;;;;;;;;;;;MAiBZ,EAAE,QAAQ;;;;;;;;;;;;;;OAcT,CAAC;QAEJ,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE;QAAK;IAClC,EAAE,OAAO,KAAK;QACZ,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO,OAAO;QAAK,GACrB;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}